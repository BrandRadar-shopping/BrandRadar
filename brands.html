<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BrandRadar – Brands</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header class="main-header">
    <a class="logo" href="index.html">BrandRadar</a>
    <nav class="top-nav">
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="brands.html" aria-current="page">Brands</a>
      <a href="favoritter.html">Favoritter (<span data-fav-count>0</span>)</a>

    </nav>
    <form class="search-container" role="search">
      <input type="search" id="searchInput" placeholder="Søk produkter…" aria-label="Søk">
    </form>
  </header>

  <nav class="shop-nav desktop-only">
    <ul>
      <li class="dropdown">
        <a href="#">Clothing</a>
        <div class="mega-menu">
          <ul>
            <li><span>Women</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">T-shirts & Tops</a></li>
            <li><a href="#">Dresses</a></li>
            <li><a href="#">Jeans</a></li>
            <li><a href="#">Pants</a></li>
            <li><a href="#">Jackets & Blazers</a></li>
            <li><a href="#">Gymwear</a></li>
          </ul>
          <ul>
            <li><span>Men</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">T-shirts & Polo</a></li>
            <li><a href="#">Sweats & Hoodies</a></li>
            <li><a href="#">Pants & Shorts</a></li>
            <li><a href="#">Jeans</a></li>
            <li><a href="#">Jackets</a></li>
          </ul>
          <ul>
            <li><span>Children</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">T-shirts</a></li>
            <li><a href="#">Dresses</a></li>
            <li><a href="#">Pants</a></li>
            <li><a href="#">Sweaters</a></li>
            <li><a href="#">Jackets</a></li>
          </ul>
        </div>
      </li>
      <li class="dropdown">
        <a href="#">Shoes</a>
        <div class="mega-menu">
          <ul>
            <li><span>Women</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">Sneakers</a></li>
            <li><a href="#">Boots</a></li>
            <li><a href="#">Heels</a></li>
            <li><a href="#">Sandals</a></li>
          </ul>
          <ul>
            <li><span>Men</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">Sneakers</a></li>
            <li><a href="#">Running</a></li>
            <li><a href="#">Boots</a></li>
            <li><a href="#">Dress shoes</a></li>
          </ul>
          <ul>
            <li><span>Children</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">Sneakers</a></li>
            <li><a href="#">Sandals</a></li>
            <li><a href="#">Winter shoes</a></li>
          </ul>
        </div>
      </li>
      <li class="dropdown">
        <a href="#">Supplements</a>
        <div class="mega-menu">
          <ul>
            <li><span>Categories</span></li>
            <li><a href="#">Explore all products</a></li>
            <li><a href="#">Proteiner</a></li>
            <li><a href="#">Proteinbarer</a></li>
            <li><a href="#">Kreatin</a></li>
            <li><a href="#">Vitaminer & Mineraler</a></li>
          </ul>
          <ul>
            <li><span>Brands</span></li>
            <li><a href="#">MyProtein</a></li>
            <li><a href="#">Optimum Nutrition</a></li>
            <li><a href="#">Gymshark Nutrition</a></li>
          </ul>
          <ul>
            <li><span>Goals</span></li>
            <li><a href="#">Build Muscle</a></li>
            <li><a href="#">Weight Loss</a></li>
            <li><a href="#">Recovery</a></li>
          </ul>
        </div>
      </li>
    </ul>
  </nav>

  <section class="mobile-shop mobile-only">
    <h2>Shop by category</h2>
    <button class="mobile-toggle" data-target="m-clothing">Clothing</button>
    <div class="mobile-submenu" id="m-clothing">
      <a href="#">Women</a><a href="#">Men</a><a href="#">Children</a>
    </div>
    <button class="mobile-toggle" data-target="m-shoes">Shoes</button>
    <div class="mobile-submenu" id="m-shoes">
      <a href="#">Women</a><a href="#">Men</a><a href="#">Children</a>
    </div>
    <button class="mobile-toggle" data-target="m-supplements">Supplements</button>
    <div class="mobile-submenu" id="m-supplements">
      <a href="#">Categories</a><a href="#">Brands</a><a href="#">Goals</a>
    </div>
  </section>

   <main class="container">
    <h1>Alle Brands</h1>
    <div id="brands" class="brand-grid"></div>
  </main>

  <footer class="site-footer">© BrandRadar</footer>

  <script>
    // --- URL til ditt Google Sheet med BrandRadar_Brands ---
    const sheetURL = https://docs.google.com/spreadsheets/d/e/2PACX-1vQllg-SFti-NWDq1EkYCQ5MenTpetINSfrLZuJ7vIjzF3xwClmJAeI8Ha6Lmj0xgGmo4dv5qOpEDCgh/pub?output=csv; // ← lim inn din CSV-lenke her

    // --- CSV Parser ---
    function parseCSVLine(line) {
      const out = [];
      let cur = "";
      let inQuotes = false;
      for (let i = 0; i < line.length; i++) {
        const ch = line[i];
        if (ch === '"') {
          if (inQuotes && line[i + 1] === '"') {
            cur += '"'; i++;
          } else {
            inQuotes = !inQuotes;
          }
        } else if (ch === "," && !inQuotes) {
          out.push(cur.trim());
          cur = "";
        } else {
          cur += ch;
        }
      }
      out.push(cur.trim());
      return out;
    }

    // --- Last inn Brands ---
    async function loadBrands() {
      try {
        const res = await fetch(sheetURL);
        if (!res.ok) throw new Error("Kunne ikke hente Brand-data");
        const csv = (await res.text()).trim();
        const lines = csv.split("\n");
        const headers = parseCSVLine(lines[0]);
        const rows = lines.slice(1).map(parseCSVLine);
        const grid = document.getElementById("brands");
        grid.innerHTML = "";

        const iBrand = headers.findIndex(h => h.toLowerCase().includes("brand"));
        const iLogo = headers.findIndex(h => h.toLowerCase().includes("logo"));
        const iDesc = headers.findIndex(h => h.toLowerCase().includes("desc"));
        const iLink = headers.findIndex(h => h.toLowerCase().includes("link"));

        const seen = new Set();
        rows.forEach(r => {
          const brand = r[iBrand]?.trim();
          if (!brand || seen.has(brand)) return;
          seen.add(brand);
          const logo = r[iLogo]?.trim();
          const desc = r[iDesc]?.trim();
          const link = r[iLink]?.trim();

          const card = document.createElement("div");
          card.className = "brand-card";
          card.innerHTML = `
            ${logo ? `<img src="${logo}" alt="${brand} logo">` : ""}
            <h3>${brand}</h3>
            ${desc ? `<p>${desc}</p>` : ""}
          `;

          card.addEventListener("click", () => {
            if (link) {
              window.open(link, "_blank");
            } else {
              window.location.href = "index.html?brand=" + encodeURIComponent(brand);
            }
          });

          grid.appendChild(card);
        });

        if (!grid.children.length)
          grid.innerHTML = "<p>Ingen brands funnet.</p>";

      } catch (err) {
        console.error(err);
        document.getElementById("brands").innerHTML = "<p>Kunne ikke laste brands nå.</p>";
      }
    }

    document.addEventListener("DOMContentLoaded", loadBrands);
  </script>

  <script src="brands.js"></script>
</body>
</html>

</body>
</html>
