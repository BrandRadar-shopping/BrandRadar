<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BrandRadar | SÃ¸k</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="assets/css/responsive/mobile.css?v=9" />
</head>

<body class="is-search-page">

  <!-- SEARCH HEADER -->
  <header class="m-search-header">
    <div class="m-search-top">
      <button class="m-back-btn" type="button" aria-label="Tilbake">â†</button>

      <div class="m-search-wrap" id="site-search">
        <span class="search-icon" aria-hidden="true">ğŸ”</span>

        <input
          id="search-input"
          type="search"
          placeholder="SÃ¸k produkter eller merkerâ€¦"
          autocomplete="off"
          spellcheck="false"
          aria-label="SÃ¸k"
        />

        <button class="search-clear" type="button" aria-label="TÃ¸m sÃ¸k">âœ•</button>

        <div class="search-dropdown" id="search-dropdown" hidden>
          <div class="search-section" data-section="products">
            <p class="search-section-title">Produkter</p>
            <div class="search-results" id="search-results-products"></div>
          </div>

          <div class="search-section" data-section="brands">
            <p class="search-section-title">Brands</p>
            <div class="search-results" id="search-results-brands"></div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Overlay + drawer (Se alle kategorier) -->
  <div class="mobile-overlay" id="mobileOverlay" hidden></div>

  <nav class="mobile-drawer" id="mobileDrawer" aria-label="Mobilmeny" hidden>
    <div class="mobile-drawer-header">
      <p class="mobile-drawer-title">SÃ¸k etter kategori</p>
      <button class="mobile-drawer-close" type="button" aria-label="Lukk meny">âœ•</button>
    </div>

    <div class="m-topcats" role="tablist" aria-label="Hovedkategorier">
      <button class="m-chip is-active" data-cat="clothing" type="button">KlÃ¦r</button>
      <button class="m-chip" data-cat="shoes" type="button">Sko</button>
      <button class="m-chip" data-cat="gymcorner" type="button">Gymcorner</button>
      <button class="m-chip" data-cat="accessories" type="button">TilbehÃ¸r</button>
      <button class="m-chip" data-cat="selfcare" type="button">Selfcare</button>
    </div>

    <div class="m-segments" role="tablist" aria-label="Segment">
      <button class="m-seg is-active" data-seg="Dame" type="button">Dame</button>
      <button class="m-seg" data-seg="Herre" type="button">Herre</button>
      <button class="m-seg" data-seg="Barn" type="button">Barn</button>
    </div>

    <div class="m-results">
      <div class="m-subcats">
        <h3 class="m-section-title">Kategorier</h3>
        <div class="m-grid" id="mSubcatGrid"></div>
      </div>

      <div class="m-brands">
        <h3 class="m-section-title">Toppmerker</h3>
        <div class="m-brand-row" id="mBrandRow"></div>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="m-search-main">

    <!-- Kategorier -->
    <section class="m-search-block">
      <div class="m-search-block-head">
        <h2>Kategorier</h2>
        <button class="m-allcats-btn" type="button">Se alle</button>
      </div>

      <div class="m-cat-chips" aria-label="Kategorier hurtigvalg">
        <a class="m-cat-chip" href="category.html?category=Clothing"><span class="m-cat-ico">ğŸ‘•</span><span>KlÃ¦r</span></a>
        <a class="m-cat-chip" href="category.html?category=Shoes"><span class="m-cat-ico">ğŸ‘Ÿ</span><span>Sko</span></a>
        <a class="m-cat-chip" href="category.html?category=Gymcorner"><span class="m-cat-ico">ğŸ‹ï¸</span><span>Gym</span></a>
        <a class="m-cat-chip" href="category.html?category=Accessories"><span class="m-cat-ico">ğŸ§¢</span><span>TilbehÃ¸r</span></a>
        <a class="m-cat-chip" href="category.html?category=Selfcare"><span class="m-cat-ico">ğŸ§´</span><span>Selfcare</span></a>
      </div>
    </section>

    <!-- PopulÃ¦rt nÃ¥ -->
    <section class="m-search-block">
      <div class="m-search-block-head">
        <h2>PopulÃ¦rt nÃ¥</h2>
      </div>

      <div class="m-feature-grid">
        <a class="m-feature-tile" href="luxury.html" style="--bg:url('/BrandRadar/assets/img/tiles/default-clothing.jpg')">
          <span class="m-feature-title">Luxury Corner</span>
          <span class="m-feature-sub">Eksklusivt utvalg</span>
        </a>

        <a class="m-feature-tile" href="category.html?category=Clothing" style="--bg:url('/BrandRadar/assets/img/tiles/default-clothing.jpg')">
          <span class="m-feature-title">KlÃ¦r</span>
          <span class="m-feature-sub">Trending styles</span>
        </a>

        <a class="m-feature-tile" href="category.html?category=Shoes" style="--bg:url('/BrandRadar/assets/img/tiles/default-shoes.jpg')">
          <span class="m-feature-title">Sko</span>
          <span class="m-feature-sub">Nyheter & bestselgere</span>
        </a>

        <a class="m-feature-tile" href="news.html" style="--bg:url('/BrandRadar/assets/img/tiles/default-gymcorner.jpg')">
          <span class="m-feature-title">Trender</span>
          <span class="m-feature-sub">Drops & kampanjer</span>
        </a>
      </div>
    </section>

    <!-- Toppmerker -->
    <section class="m-search-block">
      <div class="m-search-block-head">
        <h2>Toppmerker</h2>
        <a class="m-link" href="brands.html">Se alle</a>
      </div>

      <div class="m-brand-row m-brand-row--search" id="mBrandRowSearch">
        <a class="m-brand-pill" href="brands.html">Nike</a>
        <a class="m-brand-pill" href="brands.html">Adidas</a>
        <a class="m-brand-pill" href="brands.html">Gymshark</a>
        <a class="m-brand-pill" href="brands.html">Puma</a>
        <a class="m-brand-pill" href="brands.html">Asics</a>
      </div>
    </section>

  </main>

  <!-- Bottom nav: lim inn samme SVG-bottom-nav som pÃ¥ index -->

  <script src="search.js"></script>
  <script src="script.js"></script>

  <script>
    (function () {
      const backBtn  = document.querySelector(".m-back-btn");
      const openBtn  = document.querySelector(".m-allcats-btn");
      const overlay  = document.getElementById("mobileOverlay");
      const drawer   = document.getElementById("mobileDrawer");
      const closeBtn = document.querySelector(".mobile-drawer-close");

      // Back
      backBtn?.addEventListener("click", () => {
        if (history.length > 1) history.back();
        else location.href = "index.html";
      });

      // Drawer helpers
      if (overlay && drawer) {
        const openDrawer = () => {
          overlay.hidden = false;
          drawer.hidden = false;
          overlay.classList.add("is-open");
          drawer.classList.add("is-open");
          document.body.classList.add("is-locked");
        };

        const closeDrawer = () => {
          overlay.classList.remove("is-open");
          drawer.classList.remove("is-open");
          document.body.classList.remove("is-locked");
          setTimeout(() => {
            overlay.hidden = true;
            drawer.hidden = true;
          }, 250);
        };

        openBtn?.addEventListener("click", (e) => { e.preventDefault(); openDrawer(); });
        closeBtn?.addEventListener("click", closeDrawer);
        overlay.addEventListener("click", closeDrawer);
        window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeDrawer(); });
      }

      // Bottom-nav active state (hvis den finnes)
      const bottom = document.querySelector(".m-bottom-nav");
      if (bottom) {
        bottom.querySelectorAll("[data-route]").forEach(el => el.classList.remove("is-active"));
        bottom.querySelector('[data-route="search"]')?.classList.add("is-active");
      }
    })();
  </script>
</body>
</html>
